<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Deserializing Json list of objects | shulhi.sapli</title>
  <meta name="author" content="Shulhi Sapli">
  
  <meta name="description" content="i talk code, market, and random.">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="Deserializing Json list of objects"/>
  <meta property="og:site_name" content="shulhi.sapli"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="shulhi.sapli" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
  
</head>

<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">shulhi.sapli</a></h1>
  <h2><a href="/">code, market, and random talks</a></h2>
</div>
<nav id="main-nav">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
      <li><a href="/about">About</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div>
<div class="alignleft" style="margin-top: 15px">


</div>
<div class="clearfix"></div>
</header>
  <div id="content" class="inner">
    <div id="wrapper"><article class="post">
  
  <div class="post-content">
    <header>
      
  
    <h1 class="title">Deserializing Json list of objects</h1>
  

      
        <p class="published">
          Published: <time datetime="2013-04-28T06:42:50.000Z">Apr 28 2013</time>
        </p>
      
    </header>
    <div class="entry">
      
        <p>I am currently working to finish up <a href="http://getpocket.com/developer">Pocket Api</a> wrapper for C#/.Net. In turned out that the Api returned list of articles/items in Json and the list is not in array form. It is actually a list of object. We will see how we can deserialize this using <a href="http://james.newtonking.com/projects/json-net.aspx.">Json.net</a></p>
<a name="more"></a>

<p>First of all it should be straight forward to do this if it returns an array of article. However, this is the Json that was returned. I deprecated some of the code/response to make it brief.</p>
<pre><code>{ "<span class="attribute">complete</span>" : <span class="value"><span class="number">1</span></span>,
  "<span class="attribute">list</span>" : <span class="value">{ "<span class="attribute">332222557</span>" : <span class="value">{ "<span class="attribute">excerpt</span>" : <span class="value"><span class="string">"The second quarter of 2013 started with the bang. Key fundamental shifts in monetary policy and underlying changes in various economies caused a significant increase in volatility across the foreign exchange market."</span></span>,
          "<span class="attribute">given_title</span>" : <span class="value"><span class="string">"MY Favorite 3 FX Trades for Q2 - bkassetmanagement.com/?p=4424 #forex #usd "</span></span>,
          "<span class="attribute">is_article</span>" : <span class="value"><span class="string">"1"</span></span>,
          "<span class="attribute">is_index</span>" : <span class="value"><span class="string">"0"</span></span>,
          "<span class="attribute">item_id</span>" : <span class="value"><span class="string">"332222557"</span></span>,
          "<span class="attribute">resolved_id</span>" : <span class="value"><span class="string">"332222557"</span></span>,
          "<span class="attribute">resolved_title</span>" : <span class="value"><span class="string">"Top 3 Forex Trades for Q2"</span></span>,
          "<span class="attribute">sort_id</span>" : <span class="value"><span class="number">1</span></span>,
          "<span class="attribute">status</span>" : <span class="value"><span class="string">"0"</span></span>,
        }</span>,
      "<span class="attribute">341196654</span>" : <span class="value">{ "<span class="attribute">excerpt</span>" : <span class="value"><span class="string">"With no major U.S. or European economic data on the calendar today, currency pairs such as the EUR/USD and USD/JPY failed to break key levels. For EUR/USD, traders are itching for a reason to take the currency pair below 1."</span></span>,
          "<span class="attribute">given_title</span>" : <span class="value"><span class="string">"http://www.bkassetmanagement.com/?p=4560"</span></span>,
          "<span class="attribute">is_article</span>" : <span class="value"><span class="string">"1"</span></span>,
          "<span class="attribute">is_index</span>" : <span class="value"><span class="string">"0"</span></span>,
          "<span class="attribute">item_id</span>" : <span class="value"><span class="string">"341196654"</span></span>,
          "<span class="attribute">resolved_id</span>" : <span class="value"><span class="string">"341196654"</span></span>,
          "<span class="attribute">resolved_title</span>" : <span class="value"><span class="string">"EUR Break of 1.30 Hinges Upon PMIs"</span></span>,
          "<span class="attribute">sort_id</span>" : <span class="value"><span class="number">0</span></span>,
          "<span class="attribute">status</span>" : <span class="value"><span class="string">"0"</span></span>,
        }
    }</span></span>,
  "<span class="attribute">since</span>" : <span class="value"><span class="number">1367131079</span></span>,
  "<span class="attribute">status</span>" : <span class="value"><span class="number">1</span>
}</span>
</code></pre>
<p>To solve this, just treat it as Dictionary or Key-Value-Pair relationship. So, with Json.net, the class correspond to this should be something like this.</p>
<pre><code><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Pocket</span>
{</span>
    [JsonProperty(<span class="string">"status"</span>)]
    <span class="keyword">public</span> <span class="keyword">int</span> Status { <span class="keyword">get</span>; <span class="keyword">set</span>; }

    [JsonProperty(<span class="string">"complete"</span>)]
    <span class="keyword">public</span> <span class="keyword">int</span> Complete { <span class="keyword">get</span>; <span class="keyword">set</span>; }

    [JsonProperty(<span class="string">"since"</span>)]
    <span class="keyword">public</span> <span class="keyword">int</span> Since { <span class="keyword">get</span>; <span class="keyword">set</span>; }

    [JsonProperty(<span class="string">"list"</span>)]
    <span class="keyword">public</span> IDictionary&lt;<span class="keyword">string</span>, Article&gt; List { <span class="keyword">get</span>; <span class="keyword">set</span>; }
}

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Article</span>
{</span>
    <span class="comment">// Some other properties here</span>
    <span class="comment">// Deprecated coz its too long</span>

    [JsonProperty(<span class="string">"status"</span>)]
    <span class="keyword">public</span> <span class="keyword">int</span> Status { <span class="keyword">get</span>; <span class="keyword">set</span>; }

    [JsonProperty(<span class="string">"excerpt"</span>)]
    <span class="keyword">public</span> <span class="keyword">string</span> Excerpt { <span class="keyword">get</span>; <span class="keyword">set</span>; }

    [JsonProperty(<span class="string">"is_article"</span>)] <span class="keyword">private</span> <span class="keyword">int</span> _isArticle;

    <span class="keyword">public</span> <span class="keyword">bool</span> IsArticle
    {
        <span class="keyword">get</span> { <span class="keyword">return</span> _isArticle == <span class="number">1</span> ? <span class="literal">true</span> : <span class="literal">false</span>; }
        <span class="keyword">set</span> { _isArticle = value ? <span class="number">1</span> : <span class="number">0</span>; }
    }
}
</code></pre>
<p>Then just call it like this</p>
<pre><code>var converted = JsonConvert.DeserializeObject<span class="tag">&lt;<span class="title">Pocket</span>&gt;</span>(json);
</code></pre>

      
    </div>
    <footer>
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>
<!-- hackish -->

  
<section id="comment">
          
  <div class="addthis addthis_toolbox addthis_default_style">
    
      <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
    
    
      <a class="addthis_button_tweet"></a>
    
    
      <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
    
    
      <a class="addthis_button_pinterest_pinit" pi:pinit:layout="horizontal"></a>
    
    <a class="addthis_counter addthis_pill_style"></a>
  </div>
  <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js"></script>

  <h1 class="title">Comments</h1>
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

</div>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2013 Shulhi Sapli
  
</div>
<div class="clearfix"></div></footer>
  <script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<script type="text/javascript">
var disqus_shortname = 'ghshulhi';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>